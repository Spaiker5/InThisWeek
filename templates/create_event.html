{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Create Event</h1>
    <form method="POST">
        <!-- Add the CSRF token field -->
        {{ form.csrf_token }}

        <div class="form-group">
            {{ form.title.label }} {{ form.title(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.description.label }} {{ form.description(class="form-control") }}
        </div>
          <div class="form-group">
                {{ form.money.label }} {{ form.money() }}
        </div>
        <div class="form-group">
            {{ form.date.label }}
            <div class="input-group date">
                {{ form.date(class="form-control", autocomplete="off", id="datepicker") }}
                <div class="input-group-append">
                    <span class="input-group-text" id="calendarIcon"><i class="fas fa-calendar"></i></span>
                </div>
            </div>
        </div>

        <div class="form-check">
            {{ form.notify_on_event_day(class="form-check-input", id="notifyOnEventDay") }}
            <label class="form-check-label" for="notifyOnEventDay">{{ form.notify_on_event_day.label }}</label>
        </div>

        <div class="form-check">
            {{ form.monthly_notification(class="form-check-input", id="monthly_notification") }}
            <label class="form-check-label" for="monthly_notification">{{ form.monthly_notification.label }}</label>
        </div>

        <div class="form-check">
            {{ form.weekly_notification(class="form-check-input", id="weekly_notification") }}
            <label class="form-check-label" for="weekly_notification">{{ form.weekly_notification.label }}</label>
        </div>

        <button type="submit" class="btn btn-primary">Create</button>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const dateInput = document.getElementById("datepicker");
        const calendarIcon = document.getElementById("calendarIcon");

        calendarIcon.addEventListener("click", function() {
            dateInput.focus();
        });

        dateInput.addEventListener("focus", function() {
            dateInput.type = "date";
        });

        dateInput.addEventListener("blur", function() {
            if (!dateInput.value) {
                dateInput.type = "text";
            }
        });
    });
</script>
{% endblock %}
